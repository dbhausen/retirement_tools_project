import{r as u}from"./react.de62f0e0.js";globalThis&&globalThis.__awaiter;const g="(prefers-color-scheme: dark)";function b(e){var r;const n=S(g),[s,o]=m("usehooks-ts-dark-mode",(r=e??n)!==null&&r!==void 0?r:!1);return L(()=>{o(n)},[n]),{isDarkMode:s,toggle:()=>o(t=>!t),enable:()=>o(!0),disable:()=>o(!1)}}function E(e){const r=u.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return h(()=>{r.current=e},[e]),u.useCallback((...n)=>r.current(...n),[r])}function w(e,r,n,s){const o=u.useRef(r);h(()=>{o.current=r},[r]),u.useEffect(()=>{var t;const i=(t=n==null?void 0:n.current)!==null&&t!==void 0?t:window;if(!(i&&i.addEventListener))return;const c=f=>o.current(f);return i.addEventListener(e,c,s),()=>{i.removeEventListener(e,c,s)}},[e,n,s])}globalThis&&globalThis.__awaiter;function p(){const e=u.useRef(!0);return e.current?(e.current=!1,!0):e.current}const h=typeof window<"u"?u.useLayoutEffect:u.useEffect;function m(e,r){const n=u.useCallback(()=>{if(typeof window>"u")return r;try{const c=window.localStorage.getItem(e);return c?v(c):r}catch(c){return console.warn(`Error reading localStorage key “${e}”:`,c),r}},[r,e]),[s,o]=u.useState(n),t=E(c=>{typeof window>"u"&&console.warn(`Tried setting localStorage key “${e}” even though environment is not a client`);try{const f=c instanceof Function?c(s):c;window.localStorage.setItem(e,JSON.stringify(f)),o(f),window.dispatchEvent(new Event("local-storage"))}catch(f){console.warn(`Error setting localStorage key “${e}”:`,f)}});u.useEffect(()=>{o(n())},[]);const i=u.useCallback(c=>{c!=null&&c.key&&c.key!==e||o(n())},[e,n]);return w("storage",i),w("local-storage",i),[s,t]}function v(e){try{return e==="undefined"?void 0:JSON.parse(e??"")}catch{console.log("parsing error on",{value:e});return}}function S(e){const r=t=>typeof window<"u"?window.matchMedia(t).matches:!1,[n,s]=u.useState(r(e));function o(){s(r(e))}return u.useEffect(()=>{const t=window.matchMedia(e);return o(),t.addListener?t.addListener(o):t.addEventListener("change",o),()=>{t.removeListener?t.removeListener(o):t.removeEventListener("change",o)}},[e]),n}function L(e,r){const n=p();u.useEffect(()=>{if(!n)return e()},r)}export{m as a,p as b,b as u};
